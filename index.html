<!DOCTYPE html>
<html lang="es" style="scroll-behavior: smooth;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu칤a Interactiva de Ahorro en Paraguay</title>

    <!-- ETIQUETA DE VERIFICACI칍N DE GOOGLE -->
    <meta name="google-site-verification" content="qBR45iQnVdAz-G01792fk1Mdzh7Rg-BOvy30nMg-wQI" />

    <!-- ETIQUETAS SEO MEJORADAS -->
    <meta name="description" content="Gu칤a interactiva para analizar, comparar y elegir las mejores opciones de ahorro en Paraguay. Encuentra tasas de inter칠s de bancos y cooperativas.">
    <meta name="keywords" content="ahorro paraguay, invertir en paraguay, plazo fijo, cda, banco nacional de fomento, ita칰, visi칩n banco, cooperativa medalla milagrosa, cooperativa universitaria, tasas de inter칠s paraguay, comparador ahorro">
    <meta name="author" content="AhorroPY">
    <meta property="og:title" content="Gu칤a Interactiva de Ahorro en Paraguay">
    <meta property="og:description" content="Compara y elige la mejor opci칩n de ahorro en Paraguay con nuestra gu칤a interactiva.">
    <meta property="og:type" content="website">
    <!-- FIN DE ETIQUETAS SEO -->

    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Cargar Chart.js solo cuando sea necesario
        function loadChartJS() {
            return new Promise((resolve, reject) => {
                if (typeof Chart !== 'undefined') {
                    resolve();
                    return;
                }
                
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/chart.js';
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }
    </script>
    <style>
        :root {
            --primary-color: #2E5A88;
            --primary-hover: #25486C;
            --secondary-color: #4A4A4A;
            --background-color: #FDFBF8;
            --card-background: #FFFFFF;
            --text-color: #4A4A4A;
            --success-color: #0E9F6E;
            --warning-color: #F05252;
            --border-color: #EAEAEA;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
            position: relative;
        }
        
        .nav-link:hover {
            color: var(--primary-color);
        }
        
        .nav-link:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }
        
        .nav-link.active {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
        }
        
        .card {
            background-color: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -4px rgba(0, 0, 0, 0.07);
        }
        
        .btn {
            transition: background-color 0.3s, color 0.3s, transform 0.3s;
        }
        
        .btn:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }
        
        .btn-profile {
            transition: background-color 0.3s, color 0.3s, transform 0.3s;
        }
        
        .btn-profile.active {
            background-color: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }
        
        .comparison-table {
            border-collapse: collapse;
            width: 100%;
        }
        
        .comparison-table th {
            background-color: #F9FAFB;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            color: var(--secondary-color);
        }
        
        .comparison-table tbody tr {
            cursor: pointer;
            transition: background-color 0.2s;
            border-bottom: 1px solid var(--border-color);
        }
        
        .comparison-table tbody tr:hover {
            background-color: #F0F5F9;
        }
        
        .comparison-table tbody tr.selected {
            background-color: #DAE4EE;
            outline: 2px solid var(--primary-color);
            outline-offset: -2px;
        }
        
        .comparison-table td {
            padding: 0.75rem;
        }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        
        #back-to-top {
            transition: opacity 0.3s, visibility 0.3s;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            width: 600px;
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Filter styles */
        .filter-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-label {
            font-weight: 500;
            margin-bottom: 0.25rem;
        }
        
        /* Favorites */
        .favorite-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.25rem;
            color: #ccc;
            transition: color 0.2s;
        }
        
        .favorite-btn.active {
            color: #F05252;
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 1px dotted #ccc;
            cursor: help;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        /* Calculator */
        .calculator-input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ccc;
            border-radius: 0.25rem;
        }
        
        /* Responsive improvements */
        @media (max-width: 768px) {
            .comparison-table thead {
                display: none;
            }
            
            .comparison-table tr {
                display: block;
                margin-bottom: 1rem;
                border: 1px solid var(--border-color);
                border-radius: 0.5rem;
            }
            
            .comparison-table td {
                display: block;
                text-align: right;
                padding: 0.5rem 1rem;
                position: relative;
                padding-left: 50%;
            }
            
            .comparison-table td::before {
                content: attr(data-label);
                position: absolute;
                left: 1rem;
                width: calc(50% - 1rem);
                padding-right: 1rem;
                text-align: left;
                font-weight: 600;
            }
            
            .filter-container {
                flex-direction: column;
            }
            
            .modal-content {
                width: 95%;
                padding: 1rem;
            }
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-gray-800">
                <a href="#inicio" aria-label="Ir al inicio"><span class="text-[#2E5A88]">Ahorro</span>PY</a>
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="#contexto" class="nav-link text-gray-600 font-medium pb-1">Contexto</a>
                <a href="#comparador" class="nav-link text-gray-600 font-medium pb-1">Comparador</a>
                <a href="#perfiles" class="nav-link text-gray-600 font-medium pb-1">Perfiles</a>
                <a href="#simulador" class="nav-link text-gray-600 font-medium pb-1">Simulador</a>
                <a href="#fuentes" class="nav-link text-gray-600 font-medium pb-1">Fuentes</a>
                <a href="#contacto" class="nav-link text-gray-600 font-medium pb-1">Contacto</a>
            </div>
             <div class="md:hidden">
                <button id="mobile-menu-button" class="p-2 rounded-md text-gray-600 hover:bg-gray-100">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                    <span class="sr-only">Abrir men칰</span>
                </button>
            </div>
        </nav>
        
        <!-- Mobile menu (hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="#contexto" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">Contexto</a>
                <a href="#comparador" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">Comparador</a>
                <a href="#perfiles" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">Perfiles</a>
                <a href="#simulador" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">Simulador</a>
                <a href="#fuentes" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">Fuentes</a>
                <a href="#contacto" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">Contacto</a>
            </div>
        </div>
    </header>

    <main>
        <section id="inicio" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-bold text-gray-800 leading-tight">Tu Gu칤a Interactiva de Ahorro en Paraguay</h1>
                <p class="mt-4 text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">Analiza, compara y elige la mejor opci칩n para maximizar tus rendimientos. Tomar decisiones financieras informadas nunca fue tan f치cil.</p>
                <div class="mt-8 flex justify-center gap-4">
                    <a href="#comparador" class="bg-[#2E5A88] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#25486C] transition-colors">
                        Comparar opciones
                    </a>
                    <a href="#simulador" class="bg-white text-[#2E5A88] font-bold py-3 px-6 rounded-lg border border-[#2E5A88] hover:bg-gray-50 transition-colors">
                        Simular rendimientos
                    </a>
                </div>
            </div>
        </section>

        <section id="contexto" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-800">Entendiendo el Mercado Paraguayo</h2>
                    <p class="mt-2 text-gray-600">Conoce los instrumentos de ahorro y los factores que influyen en tus ganancias.</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-[#2E5A88] mb-2">Cuentas de Ahorro</h3>
                        <p class="text-gray-600">Son la opci칩n m치s b치sica y l칤quida. Ofrecen disponibilidad inmediata de tu dinero, pero sus tasas de inter칠s suelen ser las m치s bajas. Ideales para fondos de emergencia o ahorros a muy corto plazo.</p>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-[#2E5A88] mb-2">Ahorro a Plazo Fijo (CDA)</h3>
                        <p class="text-gray-600">Consiste en depositar una suma de dinero por un plazo determinado (3, 6, 12, 24+ meses) a una tasa de inter칠s fija. A mayor plazo, mayor suele ser la tasa. Ofrece rendimientos superiores a las cuentas de ahorro.</p>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-[#2E5A88] mb-2">Ahorro Programado</h3>
                        <p class="text-gray-600">Fomenta el h치bito de ahorrar mediante dep칩sitos mensuales de un monto fijo por un plazo determinado. Al final del plazo, recibes el capital m치s los intereses generados. Ideal para metas espec칤ficas.</p>
                    </div>
                </div>
                <div class="card p-6 md:p-8">
                    <h3 class="text-2xl font-bold text-center text-gray-800 mb-2">Factor Clave: Tasa de Pol칤tica Monetaria (TPM)</h3>
                    <p class="text-center text-gray-600 max-w-3xl mx-auto mb-6">La TPM es la tasa de inter칠s de referencia fijada por el Banco Central del Paraguay (BCP). Influye directamente en las tasas que los bancos ofrecen por los ahorros. Una TPM alta generalmente se traduce en mejores tasas para los ahorristas.</p>
                    <div class="text-center mb-6">
                        <span class="text-lg font-medium text-gray-600">Tasa Actual (Referencial):</span>
                        <span class="text-3xl font-bold text-[#2E5A88] ml-2">6.00%</span>
                    </div>
                    <div class="chart-container">
                        <canvas id="tpmChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="comparador" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-800">Comparador de Productos de Ahorro</h2>
                    <p class="mt-2 text-gray-600">Selecciona una instituci칩n para ver los detalles. Las tasas son estimadas y pueden variar.</p>
                </div>
                
                <div class="filter-container mb-6">
                    <div class="filter-group">
                        <label for="filter-institution" class="filter-label">Instituci칩n</label>
                        <select id="filter-institution" class="p-2 border rounded">
                            <option value="all">Todas las instituciones</option>
                            <option value="bnf">BNF</option>
                            <option value="continental">Continental</option>
                            <option value="gnb">GNB</option>
                            <option value="vision">Visi칩n</option>
                            <option value="atlas">Atlas</option>
                            <option value="medalla">Medalla Milagrosa</option>
                            <option value="universitaria">Cooperativa Universitaria</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="filter-product" class="filter-label">Producto</label>
                        <select id="filter-product" class="p-2 border rounded">
                            <option value="all">Todos los productos</option>
                            <option value="cda">CDA / Plazo Fijo</option>
                            <option value="ahorro">Ahorro Programado</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="filter-min-rate" class="filter-label">Tasa m칤nima</label>
                        <input type="number" id="filter-min-rate" min="0" max="20" step="0.1" placeholder="0%" class="p-2 border rounded">
                    </div>
                    
                    <div class="filter-group">
                        <label for="sort-by" class="filter-label">Ordenar por</label>
                        <select id="sort-by" class="p-2 border rounded">
                            <option value="tasa-desc">Mayor tasa primero</option>
                            <option value="tasa-asc">Menor tasa primero</option>
                            <option value="name">Nombre A-Z</option>
                        </select>
                    </div>
                    
                    <div class="filter-group flex flex-col justify-end">
                        <button id="reset-filters" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">Limpiar filtros</button>
                    </div>
                </div>
                
                <div class="w-full overflow-x-auto">
                    <table class="min-w-full bg-white comparison-table">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700">Favorito</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700">Instituci칩n</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700">Producto</th>
                                <th class="text-center py-3 px-4 font-semibold text-gray-700">Tasa Anual (%)</th>
                                <th class="text-right py-3 px-4 font-semibold text-gray-700 hidden md:table-cell">Monto M칤nimo (Gs.)</th>
                                <th class="text-left py-3 px-4 font-semibold text-gray-700 hidden lg:table-cell">Plazo M칤nimo</th>
                            </tr>
                        </thead>
                        <tbody id="comparison-body" class="text-gray-700">
                        </tbody>
                    </table>
                </div>

                <div class="mt-8 text-center text-sm text-gray-500">
                    <p>游눠 Consejo: Haz clic en cualquier fila para ver detalles completos. Marca tus opciones favoritas para compararlas m치s f치cilmente.</p>
                </div>
            </div>
        </section>

        <!-- Modal para detalles -->
        <div id="details-modal" class="modal">
            <div class="modal-content relative">
                <button id="modal-close" class="modal-close" aria-label="Cerrar modal">&times;</button>
                <div id="modal-body"></div>
            </div>
        </div>

        <section id="perfiles" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-800">Recomendaci칩n Seg칰n tu Perfil</h2>
                    <p class="mt-2 text-gray-600">Encuentra la estrategia que mejor se adapta a tus metas y tolerancia al riesgo.</p>
                </div>
                <div class="flex justify-center space-x-2 md:space-x-4 mb-8">
                    <button id="btn-conservador" class="btn-profile active bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-full">Conservador</button>
                    <button id="btn-moderado" class="btn-profile bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-full">Moderado</button>
                    <button id="btn-maximizador" class="btn-profile bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-full">Maximizador</button>
                </div>
                
                <div id="content-conservador" class="profile-content card p-8">
                    <h3 class="text-2xl font-bold text-[#2E5A88] mb-4">Perfil Conservador: Seguridad y Liquidez</h3>
                    <p class="text-gray-600 mb-4">Tu prioridad es proteger tu capital y tener acceso a 칠l en cualquier momento. No te importa sacrificar un poco de rendimiento a cambio de m치xima seguridad y disponibilidad.</p>
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                        <p class="font-bold text-gray-800">Mejor Opci칩n:</p>
                        <p class="text-gray-700">Una <span class="font-semibold">Cuenta de Ahorros tradicional o Ahorro Programado</span> en un banco de primera l칤nea y con respaldo estatal como el <span class="font-semibold">Banco Nacional de Fomento (BNF)</span>. Ofrece la m치xima seguridad del sistema y te permite retirar tus fondos cuando los necesites sin penalizaci칩n.</p>
                    </div>
                </div>
                <div id="content-moderado" class="profile-content card p-8 hidden">
                     <h3 class="text-2xl font-bold text-[#2E5A88] mb-4">Perfil Moderado: Equilibrio Inteligente</h3>
                    <p class="text-gray-600 mb-4">Buscas un rendimiento justo por tu dinero, pero sin renunciar a una seguridad alta. Est치s dispuesto a inmovilizar una parte de tus ahorros por un tiempo corto o mediano para obtener una mejor tasa.</p>
                    <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg">
                        <p class="font-bold text-gray-800">Mejor Opci칩n:</p>
                        <p class="text-gray-700">Un <span class="font-semibold">Certificado de Dep칩sito de Ahorro (CDA) a mediano plazo (12 a 24 meses)</span> en bancos privados s칩lidos como <span class="font-semibold">Banco Continental o Banco Atlas</span>. Tambi칠n, un CDA en una Cooperativa de Ahorro y Cr칠dito grande como <span class="font-semibold">Medalla Milagrosa</span> puede ofrecer tasas muy competitivas con un buen nivel de seguridad.</p>
                    </div>
                </div>
                <div id="content-maximizador" class="profile-content card p-8 hidden">
                     <h3 class="text-2xl font-bold text-[#2E5A88] mb-4">Perfil Maximizador: A por el Mayor Rendimiento</h3>
                    <p class="text-gray-600 mb-4">Tu objetivo principal es obtener la tasa de inter칠s m치s alta posible. Comprendes que para ello necesitas inmovilizar tu dinero por plazos m치s largos y est치s c칩modo con ello.</p>
                     <div class="bg-orange-50 border-l-4 border-orange-500 p-4 rounded-r-lg">
                        <p class="font-bold text-gray-800">Mejor Opci칩n:</p>
                        <p class="text-gray-700">Un <span class="font-semibold">CDA a largo plazo (m치s de 24 meses)</span>. Investiga las ofertas de bancos como <span class="font-semibold">Banco GNB o Visi칩n Banco</span>, que a menudo tienen tasas promocionales atractivas para plazos extendidos. Las Cooperativas como <span class="font-semibold">Medalla Milagrosa o Universitaria</span> tambi칠n son una excelente alternativa en este segmento, usualmente liderando las tasas de mercado para socios.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SIMULADOR MEJORADO -->
        <section id="simulador" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-800">Simulador de Rendimientos</h2>
                    <p class="mt-2 text-gray-600">Calcula cu치nto podr칤as ganar con diferentes opciones de ahorro.</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-[#2E5A88] mb-4">Par치metros de simulaci칩n</h3>
                        
                        <div class="mb-4">
                            <label for="sim-amount" class="block text-gray-700 mb-2">Monto a invertir (Gs.)</label>
                            <input type="number" id="sim-amount" min="100000" step="100000" value="5000000" class="calculator-input">
                        </div>
                        
                        <div class="mb-4">
                            <label for="sim-institution" class="block text-gray-700 mb-2">Producto</label>
                            <select id="sim-product" class="calculator-input">
                                <!-- Options will be populated by JavaScript -->
                            </select>
                        </div>
                        
                        <div class="mb-4">
                            <label for="sim-period" class="block text-gray-700 mb-2">Plazo (meses)</label>
                            <input type="number" id="sim-period" min="1" max="60" value="12" class="calculator-input">
                        </div>
                        
                        <button id="calculate-btn" class="w-full bg-[#2E5A88] text-white font-bold py-2 px-4 rounded hover:bg-[#25486C] transition-colors">
                            Calcular rendimiento
                        </button>
                    </div>
                    
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-[#2E5A88] mb-4">Resultados de la simulaci칩n</h3>
                        
                        <div class="mb-4 p-4 bg-blue-50 rounded-lg">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Inversi칩n inicial:</span>
                                <span id="result-initial" class="font-bold">5.000.000 Gs.</span>
                            </div>
                        </div>
                        
                        <div class="mb-4 p-4 bg-green-50 rounded-lg">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Intereses generados:</span>
                                <span id="result-interest" class="font-bold">0 Gs.</span>
                            </div>
                        </div>
                        
                        <div class="mb-4 p-4 bg-blue-100 rounded-lg">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Monto final:</span>
                                <span id="result-total" class="font-bold text-lg">5.000.000 Gs.</span>
                            </div>
                        </div>
                        
                        <div class="mt-6 text-sm text-gray-500">
                            <p>游눠 Esta simulaci칩n es una estimaci칩n. Los valores reales pueden variar. El c치lculo para Ahorro Programado es una aproximaci칩n simple.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- FIN DEL SIMULADOR MEJORADO -->

        <section id="fuentes" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                 <h2 class="text-2xl font-bold text-gray-800">Aviso Importante y Fuentes de Informaci칩n</h2>
                 <p class="mt-4 text-gray-600 max-w-3xl mx-auto">Las tasas de inter칠s y condiciones de los productos financieros cambian constantemente. La informaci칩n presentada en esta gu칤a es referencial y fue recopilada con fines ilustrativos.</p>
                 <p class="mt-4 text-gray-600 max-w-3xl mx-auto font-semibold">Antes de tomar cualquier decisi칩n, es fundamental que verifiques las tasas vigentes y los t칠rminos y condiciones directamente en el sitio web oficial de cada instituci칩n o contactando a un ejecutivo de cuentas.</p>
                 <a href="https://www.bcp.gov.py/indicadores-financieros-y-de-precios" target="_blank" rel="noopener noreferrer" class="mt-6 inline-block bg-[#2E5A88] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#25486C] transition-colors">
                    Consultar Tasas Promedio en el BCP
                </a>
            </div>
        </section>

        <section id="contacto" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6 text-center">
                 <h2 class="text-2xl font-bold text-gray-800">Sugerencias y Contacto</h2>
                 <p class="mt-4 text-gray-600 max-w-3xl mx-auto">Esta es una herramienta independiente creada para facilitar la toma de decisiones financieras en Paraguay. Si encuentras alg칰n error, tienes alguna sugerencia para mejorar la web o quieres a침adir alguna instituci칩n, no dudes en escribirme.</p>
                 <p class="mt-6">
                    <a href="mailto:guidufox@proton.me" class="text-[#2E5A88] font-bold text-lg hover:underline">
                        guidufox@proton.me
                    </a>
                </p>
                <div class="mt-8 flex justify-center gap-6">
                    <a href="https://x.com/guidufox" target="_blank" rel="noopener noreferrer" aria-label="Visitar perfil de X" class="text-gray-500 hover:text-[#2E5A88] transition-colors">
                        <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
                        </svg>
                    </a>
                    <a href="https://www.instagram.com/guidufox/" target="_blank" rel="noopener noreferrer" aria-label="Visitar perfil de Instagram" class="text-gray-500 hover:text-[#2E5A88] transition-colors">
                        <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427C2.013 15.098 2 14.744 2 12.315s.013-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.902 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.023.047 1.351.058 3.807.058h.468c2.456 0 2.784-.011 3.807-.058.975-.045 1.504-.207 1.857-.344.467-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.047-1.023.058-1.351-.058-3.807v-.468c0-2.456-.011-2.784-.058-3.807-.045-.975-.207-1.504-.344-1.857a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0z" clip-rule="evenodd"></path>
                        </svg>
                    </a>
                    <a href="https://www.twitch.tv/guidufox" target="_blank" rel="noopener noreferrer" aria-label="Visitar canal de Twitch" class="text-gray-500 hover:text-[#2E5A88] transition-colors">
                        <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M11.571 4.714h1.715v5.143H11.57zM8 4.714h1.714v5.143H8zM2 0v16.286h5.143V20l4.286-3.714h4.286L22 10.142V0zm18.286 9.571-3.429 3.429h-3.428l-3 3v-3H6.857V1.714h13.429z"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </section>

    </main>
    
    <a href="#inicio" id="back-to-top" class="fixed bottom-5 right-5 bg-[#2E5A88] text-white p-3 rounded-full shadow-lg hover:bg-[#25486C] transition-opacity duration-300 opacity-0 invisible" title="Volver arriba" aria-label="Volver al inicio">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
        </svg>
    </a>

    <footer class="bg-white py-6 border-t">
        <div class="container mx-auto px-6 text-center text-gray-500">
            <p>&copy; 2025 AhorroPY. Herramienta de an치lisis financiero para el mercado paraguayo.</p>
            <p class="text-sm mt-2">Desarrollado por <a href="https://github.com/Guidufox" target="_blank" rel="noopener noreferrer" class="text-[#2E5A88] hover:underline">Guidufox</a>.</p>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // Mobile menu functionality
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
        });
    }
    
    // --- NUEVA BASE DE DATOS AMPLIADA ---
    const data = [
        // --- CDA / Ahorro a Plazo Fijo ---
        {
            id: 'medalla-cda',
            institucion: 'Cooperativa Medalla Milagrosa',
            producto: 'Ahorro a Plazo Fijo',
            tipo: 'cda',
            tasa: 11.00,
            montoMinimo: '1.000.000',
            plazoMinimo: '12 meses',
            ventaja: 'Suele ofrecer las tasas m치s altas del mercado',
            desventaja: 'Requiere ser socio de la cooperativa',
            proceso: 'Primero debes asociarte, lo que implica un peque침o aporte de capital. Luego, la apertura del plazo fijo es presencial. Se necesita CI y ser socio activo.',
            capitalizacion: 'Al vencimiento. Los intereses se acreditan junto con el capital al finalizar el periodo pactado.',
            riesgo: 'Las cooperativas son reguladas por el INCOOP, no por el BCP. Medalla es una de las m치s grandes y s칩lidas, pero el riesgo se percibe de forma distinta a un banco. No cuentan con el fondo de garant칤a de dep칩sitos del BCP.',
            fiscal: 'Los rendimientos (excedentes en cooperativas) tienen un tratamiento fiscal diferente, a menudo con tasas preferenciales o exenciones, lo que aumenta su atractivo. Se debe consultar la ley de cooperativas vigente.'
        },
        {
            id: 'universitaria-cda',
            institucion: 'Cooperativa Universitaria',
            producto: 'CDA Socios',
            tipo: 'cda',
            tasa: 10.50,
            montoMinimo: '1.000.000',
            plazoMinimo: '12 meses',
            ventaja: 'Excelentes tasas y gran solidez en el sector cooperativo',
            desventaja: 'Requiere ser socio y cumplir con requisitos de membres칤a',
            proceso: 'Debes ser socio para acceder. El proceso implica presentar documentos y un aporte de capital. La apertura del CDA se realiza en sus sucursales.',
            capitalizacion: 'Generalmente al vencimiento, depositando el capital e intereses en la cuenta del socio.',
            riesgo: 'Regulada por INCOOP. Es una de las cooperativas m치s grandes y con mayor trayectoria del pa칤s, considerada de muy bajo riesgo dentro de su sector.',
            fiscal: 'Los rendimientos de los socios de cooperativas (excedentes) suelen tener beneficios fiscales. Es importante consultar la normativa actual para detalles espec칤ficos.'
        },
        {
            id: 'gnb-cda',
            institucion: 'Banco GNB Paraguay',
            producto: 'CDA a Plazo Fijo',
            tipo: 'cda',
            tasa: 8.75,
            montoMinimo: '10.000.000',
            plazoMinimo: '12 meses',
            ventaja: 'Tasas de inter칠s muy competitivas',
            desventaja: 'Monto de apertura m치s elevado',
            proceso: 'Se puede gestionar en sucursales. Requiere documentaci칩n est치ndar (CI, comprobante de ingresos). Ofrecen atenci칩n personalizada para estos productos.',
            capitalizacion: 'Generalmente al vencimiento, aunque pueden ofrecer opciones de pago de intereses peri칩dicos (mensual, trimestral) que no se capitalizan, sino que se pagan en una cuenta.',
            riesgo: 'Parte de un grupo financiero internacional s칩lido, el Banco GNB es una entidad bien calificada y segura en el mercado paraguayo.',
            fiscal: 'Los rendimientos est치n sujetos a la retenci칩n del impuesto a la renta correspondiente, seg칰n la legislaci칩n vigente.'
        },
        {
            id: 'atlas-cda',
            institucion: 'Banco Atlas',
            producto: 'CDA Plus',
            tipo: 'cda',
            tasa: 8.50,
            montoMinimo: '5.000.000',
            plazoMinimo: '12 meses',
            ventaja: 'Buenas tasas y promociones frecuentes',
            desventaja: 'Las mejores tasas a veces exigen plazos m치s largos',
            proceso: 'Contrataci칩n en sucursales con asesor칤a personalizada. Requieren CI, comprobantes de ingresos y justificativo del origen de los fondos.',
            capitalizacion: 'La capitalizaci칩n es al vencimiento del plazo. El total (capital + intereses) es depositado en la cuenta del cliente.',
            riesgo: 'Banco privado con d칠cadas en el mercado, conocido por su solidez financiera y buena gesti칩n de riesgo.',
            fiscal: 'Los rendimientos de capital est치n alcanzados por el IRP o IRE. El banco se encarga de realizar la retenci칩n impositiva.'
        },
        {
            id: 'continental-cda',
            institucion: 'Banco Continental',
            producto: 'CDA Digital a 1 a침o',
            tipo: 'cda',
            tasa: 8.25,
            montoMinimo: '1.000.000',
            plazoMinimo: '12 meses',
            ventaja: 'Proceso 100% online y montos accesibles',
            desventaja: 'Tasas competitivas pero pueden no ser las m치s altas',
            proceso: 'F치cil y r치pido a trav칠s de su app o banca web si ya eres cliente. Requiere tener una cuenta activa en el banco. La apertura es inmediata.',
            capitalizacion: 'Al vencimiento. El banco deposita el capital m치s los intereses en tu cuenta de ahorros asociada una vez cumplido el plazo.',
            riesgo: 'Es uno de los bancos privados m치s grandes y s칩lidos del pa칤s, con excelente calificaci칩n de riesgo. Se considera una instituci칩n muy segura.',
            fiscal: 'Aplica la misma normativa fiscal. Los intereses generados son considerados renta y est치n gravados. El banco practica la retenci칩n correspondiente al momento del pago.'
        },
        {
            id: 'bnf-cda',
            institucion: 'Banco Nacional de Fomento (BNF)',
            producto: 'CDA a 1 a침o',
            tipo: 'cda',
            tasa: 7.50,
            montoMinimo: '5.000.000',
            plazoMinimo: '12 meses',
            ventaja: 'M치xima seguridad (banco estatal)',
            desventaja: 'Procesos pueden ser m치s burocr치ticos',
            proceso: 'Generalmente presencial en sucursales. Se requiere c칠dula de identidad, comprobante de ingresos y a veces una factura de servicio b치sico.',
            capitalizacion: 'Al vencimiento. Recibes tu capital inicial m치s todos los intereses generados.',
            riesgo: 'Considerado el riesgo m치s bajo del sistema financiero paraguayo al contar con el respaldo directo del Estado.',
            fiscal: 'Los rendimientos de capital est치n sujetos al Impuesto a la Renta (IRP o IRE). La entidad financiera realiza la retenci칩n.'
        },
        // --- Ahorro Programado ---
        {
            id: 'vision-ahorro',
            institucion: 'Visi칩n Banco',
            producto: 'Ahorro Programado Anual',
            tipo: 'ahorro',
            tasa: 7.00,
            montoMinimo: '100.000 (cuota mensual)',
            plazoMinimo: '12 meses',
            ventaja: 'Fomenta el h치bito del ahorro con cuotas bajas',
            desventaja: 'Tasa menor a un CDA por el mismo plazo',
            proceso: 'Contrataci칩n sencilla en sucursales o a trav칠s de canales digitales para clientes existentes.',
            capitalizacion: 'Los intereses se calculan sobre el saldo promedio y se acreditan al final del plazo.',
            riesgo: 'Banco de gran trayectoria y solidez en Paraguay. Es una opci칩n segura.',
            fiscal: 'Los intereses ganados est치n sujetos a las retenciones de impuestos correspondientes.'
        },
        {
            id: 'atlas-ahorro',
            institucion: 'Banco Atlas',
            producto: 'Ahorro Programado Mi Meta',
            tipo: 'ahorro',
            tasa: 6.50,
            montoMinimo: '100.000 (cuota mensual)',
            plazoMinimo: '12 meses',
            ventaja: 'Flexibilidad en plazos y cuotas, 100% digital',
            desventaja: 'Tasa inferior a otras opciones de inversi칩n',
            proceso: 'Se puede abrir y gestionar completamente desde la app del banco si ya eres cliente.',
            capitalizacion: 'Al final del periodo, se acredita el capital m치s los intereses ganados.',
            riesgo: 'Banco privado s칩lido y seguro, con buena reputaci칩n en el mercado.',
            fiscal: 'Los rendimientos est치n sujetos a la retenci칩n de impuestos vigente.'
        },
         {
            id: 'bnf-ahorro',
            institucion: 'Banco Nacional de Fomento (BNF)',
            producto: 'Ahorro Programado',
            tipo: 'ahorro',
            tasa: 5.50,
            montoMinimo: '100.000 (cuota mensual)',
            plazoMinimo: '12 meses',
            ventaja: 'Seguridad m치xima del estado, ideal para iniciar el h치bito',
            desventaja: 'Tasa de inter칠s m치s baja del mercado',
            proceso: 'La apertura se realiza de forma presencial en las sucursales del banco.',
            capitalizacion: 'Al vencimiento del plazo, se entrega el monto ahorrado m치s los intereses.',
            riesgo: 'El m치s bajo posible al ser el banco del estado paraguayo.',
            fiscal: 'Rendimientos sujetos a la retenci칩n de impuestos correspondiente.'
        }
    ];

    // Favorites functionality
    let favorites = JSON.parse(localStorage.getItem('favorites')) || {};
    
    const tbody = document.getElementById('comparison-body');
    const modal = document.getElementById('details-modal');
    const modalBody = document.getElementById('modal-body');
    const modalClose = document.getElementById('modal-close');
    
    // Filter elements
    const filterInstitution = document.getElementById('filter-institution');
    const filterProduct = document.getElementById('filter-product');
    const filterMinRate = document.getElementById('filter-min-rate');
    const sortBy = document.getElementById('sort-by');
    const resetFilters = document.getElementById('reset-filters');
    
    // Render table function
    function renderTable() {
        tbody.innerHTML = '';
        
        // Get filter values
        const institutionValue = filterInstitution.value;
        const productValue = filterProduct.value;
        const minRateValue = parseFloat(filterMinRate.value) || 0;
        const sortValue = sortBy.value;
        
        // Filter and sort data
        let filteredData = data.filter(item => {
            return (institutionValue === 'all' || item.institucion.toLowerCase().includes(institutionValue.toLowerCase())) &&
                   (productValue === 'all' || item.tipo === productValue) &&
                   item.tasa >= minRateValue;
        });
        
        // Sort data
        if (sortValue === 'tasa-desc') {
            filteredData.sort((a, b) => b.tasa - a.tasa);
        } else if (sortValue === 'tasa-asc') {
            filteredData.sort((a, b) => a.tasa - b.tasa);
        } else if (sortValue === 'name') {
            filteredData.sort((a, b) => a.institucion.localeCompare(b.institucion));
        }
        
        // Render rows
        filteredData.forEach(item => {
            const tr = document.createElement('tr');
            tr.className = 'border-b border-gray-200';
            tr.dataset.id = item.id;
            
            const isFavorite = favorites[item.id] || false;
            
            tr.innerHTML = `
                <td class="py-3 px-4 text-center" data-label="Favorito">
                    <button class="favorite-btn ${isFavorite ? 'active' : ''}" data-id="${item.id}" aria-label="${isFavorite ? 'Quitar de favoritos' : 'Agregar a favoritos'}">
                        ${isFavorite ? '仇벒잺' : '游밼'}
                    </button>
                </td>
                <td class="py-3 px-4 font-medium" data-label="Instituci칩n">${item.institucion}</td>
                <td class="py-3 px-4" data-label="Producto">${item.producto}</td>
                <td class="py-3 px-4 text-center font-semibold text-green-700" data-label="Tasa Anual">${item.tasa.toFixed(2)}%</td>
                <td class="py-3 px-4 text-right hidden md:table-cell" data-label="Monto M칤nimo">${item.montoMinimo}</td>
                <td class="py-3 px-4 hidden lg:table-cell" data-label="Plazo M칤nimo">${item.plazoMinimo}</td>
            `;
            tbody.appendChild(tr);
        });
        
        // Add event listeners to favorite buttons
        document.querySelectorAll('.favorite-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                const id = this.dataset.id;
                favorites[id] = !favorites[id];
                localStorage.setItem('favorites', JSON.stringify(favorites));
                this.classList.toggle('active');
                this.innerHTML = favorites[id] ? '仇벒잺' : '游밼';
                this.setAttribute('aria-label', favorites[id] ? 'Quitar de favoritos' : 'Agregar a favoritos');
            });
        });
    }
    
    // Table row click event
    tbody.addEventListener('click', function(e) {
        const row = e.target.closest('tr');
        if (!row || e.target.classList.contains('favorite-btn')) return;

        const id = row.dataset.id;
        const itemData = data.find(d => d.id === id);

        if (itemData) {
            modalBody.innerHTML = `
                <h3 class="text-2xl font-bold text-gray-800 mb-4">${itemData.institucion}</h3>
                <div class="grid md:grid-cols-2 gap-x-8 gap-y-6 text-left">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-bold text-lg text-[#2E5A88]">Ventajas y Desventajas</h4>
                        <p class="mt-2"><span class="font-semibold text-green-600">Ventaja:</span> ${itemData.ventaja}</p>
                        <p class="mt-1"><span class="font-semibold text-red-600">Desventaja:</span> ${itemData.desventaja}</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-bold text-lg text-[#2E5A88]">Proceso de Contrataci칩n</h4>
                        <p class="mt-2">${itemData.proceso}</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-bold text-lg text-[#2E5A88]">Capitalizaci칩n y Riesgo</h4>
                        <p class="mt-2"><span class="font-semibold">Capitalizaci칩n:</span> ${itemData.capitalizacion}</p>
                        <p class="mt-1"><span class="font-semibold">Nivel de Riesgo:</span> ${itemData.riesgo}</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-bold text-lg text-[#2E5A88]">Aspectos Fiscales</h4>
                        <p class="mt-2">${itemData.fiscal}</p>
                    </div>
                </div>
                <div class="mt-6 flex justify-center">
                    <button class="bg-[#2E5A88] text-white font-bold py-2 px-6 rounded hover:bg-[#25486C] transition-colors" onclick="document.getElementById('details-modal').style.display='none'">
                        Cerrar
                    </button>
                </div>
            `;
            modal.style.display = 'flex';
        }
    });
    
    // Modal close event
    modalClose.addEventListener('click', () => { modal.style.display = 'none'; });
    window.addEventListener('click', (e) => { if (e.target === modal) modal.style.display = 'none'; });
    
    // Load chart
    loadChartJS().then(() => {
        const tpmCtx = document.getElementById('tpmChart').getContext('2d');
        new Chart(tpmCtx, {
            type: 'line',
            data: {
                labels: ['Ene', 'Mar', 'May', 'Jul', 'Sep', 'Nov', 'Actual'],
                datasets: [{
                    label: 'Evoluci칩n Tasa de Pol칤tica Monetaria (%)',
                    data: [8.50, 8.50, 8.25, 7.75, 7.25, 6.75, 6.00],
                    backgroundColor: 'rgba(46, 90, 136, 0.1)',
                    borderColor: '#2E5A88',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: { y: { beginAtZero: false, ticks: { callback: (value) => value + '%' } } },
                plugins: { legend: { display: false } }
            }
        });
    }).catch(err => console.error('Failed to load Chart.js', err));
    
    // Profile switching
    const profileButtons = document.querySelectorAll('.btn-profile');
    const profileContents = document.querySelectorAll('.profile-content');
    profileButtons.forEach(button => {
        button.addEventListener('click', () => {
            const profile = button.id.replace('btn-', '');
            profileButtons.forEach(btn => btn.classList.remove('active'));
            profileContents.forEach(content => content.classList.add('hidden'));
            button.classList.add('active');
            document.getElementById(`content-${profile}`).classList.remove('hidden');
        });
    });

    // Back to top button
    const backToTopButton = document.getElementById('back-to-top');
    window.onscroll = () => {
        if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
            backToTopButton.classList.remove('opacity-0', 'invisible');
        } else {
            backToTopButton.classList.add('opacity-0', 'invisible');
        }
    };
    
    // --- SIMULATOR LOGIC ---
    const calculateBtn = document.getElementById('calculate-btn');
    const simAmount = document.getElementById('sim-amount');
    const simProductSelect = document.getElementById('sim-product');
    const simPeriod = document.getElementById('sim-period');
    
    const resultInitial = document.getElementById('result-initial');
    const resultInterest = document.getElementById('result-interest');
    const resultTotal = document.getElementById('result-total');
    
    function populateSimulatorProducts() {
        simProductSelect.innerHTML = '';
        data.forEach(item => {
            const option = document.createElement('option');
            option.value = item.id;
            option.textContent = `${item.institucion} - ${item.producto} (${item.tasa}%)`;
            simProductSelect.appendChild(option);
        });
    }

    function calculateReturns() {
        const amount = parseFloat(simAmount.value);
        const productId = simProductSelect.value;
        const periodMonths = parseInt(simPeriod.value);
        
        const selectedProduct = data.find(item => item.id === productId);
        if (!selectedProduct) return;

        const rate = selectedProduct.tasa;
        let interest = 0;

        if (selectedProduct.tipo === 'cda') {
            // Simple interest for CDA
            interest = amount * (rate / 100) * (periodMonths / 12);
        } else if (selectedProduct.tipo === 'ahorro') {
            // Approximate calculation for programmed savings
            // This is a simplification; real calculations are more complex.
            // It assumes average balance over the period.
            const totalSaved = amount * periodMonths;
            interest = (totalSaved / 2) * (rate / 100) * (periodMonths / 12);
             // For simplicity, we'll calculate based on the initial amount as a single deposit
            resultInitial.textContent = `${formatNumber(amount * periodMonths)} Gs. (Cuotas)`;
            resultTotal.textContent = `${formatNumber(amount * periodMonths + interest)} Gs.`;
            resultInterest.textContent = `${formatNumber(interest)} Gs.`;
            return;
        }

        const total = amount + interest;
        
        resultInitial.textContent = `${formatNumber(amount)} Gs.`;
        resultInterest.textContent = `${formatNumber(interest)} Gs.`;
        resultTotal.textContent = `${formatNumber(total)} Gs.`;
    }

    const formatNumber = num => new Intl.NumberFormat('es-PY').format(Math.round(num));
    
    calculateBtn.addEventListener('click', calculateReturns);
    simAmount.addEventListener('input', calculateReturns);
    simProductSelect.addEventListener('change', calculateReturns);
    simPeriod.addEventListener('input', calculateReturns);
    
    // Initial setup
    renderTable();
    populateSimulatorProducts();
    calculateReturns();

    // Filter event listeners
    [filterInstitution, filterProduct, filterMinRate, sortBy].forEach(filter => {
        filter.addEventListener('change', renderTable);
    });
    filterMinRate.addEventListener('input', renderTable);
    resetFilters.addEventListener('click', () => {
        filterInstitution.value = 'all';
        filterProduct.value = 'all';
        filterMinRate.value = '';
        sortBy.value = 'tasa-desc';
        renderTable();
    });
});
</script>

</body>
</html>
